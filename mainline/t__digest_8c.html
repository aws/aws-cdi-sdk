<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<title>CDI SDK: src/cdi/t_digest.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="image_left.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CDI SDK
   </div>
   <div id="projectbrief">SDK for transporting chunks of data reliably and with low latency using a polled mode network driver.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_440858bc2ff41f5ef15b020e90223871.html">cdi</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">t_digest.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>An implementation of the t-digest percentile estimation algorithm developed by Ted Dunning and Otmar Ertl and available here: <a href="https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf">https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="t__digest_8h_source.html">t_digest.h</a>&quot;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;float.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="configuration_8h_source.html">configuration.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cdi__logger__api_8h_source.html">cdi_logger_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cdi__os__api_8h_source.html">cdi_os_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utilities__api_8h_source.html">utilities_api.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCluster.html">Cluster</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This data structure represents a cluster. Each cluster in the t-digest contains a mean and a weight (number of samples).  <a href="structCluster.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTDigest.html">TDigest</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main structure of the t-digest.  <a href="structTDigest.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abbd9abb7ec06faf1ea612a9c3350a133" id="r_abbd9abb7ec06faf1ea612a9c3350a133"><td class="memItemLeft" align="right" valign="top"><a id="abbd9abb7ec06faf1ea612a9c3350a133" name="abbd9abb7ec06faf1ea612a9c3350a133"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_POSSIBLE_SAMPLE_VALUE</b>&#160;&#160;&#160;(UINT32_MAX)</td></tr>
<tr class="memdesc:abbd9abb7ec06faf1ea612a9c3350a133"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum value for uint32_t type. Used to initialize the mimimum sample value in a digest. <br /></td></tr>
<tr class="separator:abbd9abb7ec06faf1ea612a9c3350a133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51d8499040f1920c30f8a5be2b8cbb06" id="r_a51d8499040f1920c30f8a5be2b8cbb06"><td class="memItemLeft" align="right" valign="top"><a id="a51d8499040f1920c30f8a5be2b8cbb06" name="a51d8499040f1920c30f8a5be2b8cbb06"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TAIL_PERCENT_FOR_SINGLE_SAMPLE</b>&#160;&#160;&#160;(2)</td></tr>
<tr class="memdesc:a51d8499040f1920c30f8a5be2b8cbb06"><td class="mdescLeft">&#160;</td><td class="mdescRight">The amount of the distribution tail to force to be single-sample clusters. <br /></td></tr>
<tr class="separator:a51d8499040f1920c30f8a5be2b8cbb06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b7efa1320b95f556f25fd2bcfbc0b4" id="r_a50b7efa1320b95f556f25fd2bcfbc0b4"><td class="memItemLeft" align="right" valign="top"><a id="a50b7efa1320b95f556f25fd2bcfbc0b4" name="a50b7efa1320b95f556f25fd2bcfbc0b4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_FAILED_MERGE_COUNT</b>&#160;&#160;&#160;(5)</td></tr>
<tr class="memdesc:a50b7efa1320b95f556f25fd2bcfbc0b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The amount of times to retry merging before giving up. <br /></td></tr>
<tr class="separator:a50b7efa1320b95f556f25fd2bcfbc0b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a299738426f17ef7fb3e47f1f5933db8e" id="r_a299738426f17ef7fb3e47f1f5933db8e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a299738426f17ef7fb3e47f1f5933db8e">TDigestClusterCompare</a> (const void *operand1_ptr, const void *operand2_ptr)</td></tr>
<tr class="memdesc:a299738426f17ef7fb3e47f1f5933db8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to compare two nodes by looking at their mean values. This is an input to the qsort function.  <br /></td></tr>
<tr class="separator:a299738426f17ef7fb3e47f1f5933db8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78e4c8c15bfbb881ff875b2aa3c45029" id="r_a78e4c8c15bfbb881ff875b2aa3c45029"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78e4c8c15bfbb881ff875b2aa3c45029">TDigestInterpolate</a> (const uint32_t input_sample1, const uint32_t input_sample2, int sample_index, int total_interpolation_points)</td></tr>
<tr class="memdesc:a78e4c8c15bfbb881ff875b2aa3c45029"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to interpolate from input_sample1 to input_sample2 by sample_index/num_samples_of_interest.  <br /></td></tr>
<tr class="separator:a78e4c8c15bfbb881ff875b2aa3c45029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64695ee97ac84eac5a3920b70b710973" id="r_a64695ee97ac84eac5a3920b70b710973"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64695ee97ac84eac5a3920b70b710973">TDigestSort</a> (<a class="el" href="structTDigest.html">TDigest</a> *td_ptr)</td></tr>
<tr class="memdesc:a64695ee97ac84eac5a3920b70b710973"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to sort a <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> structure.  <br /></td></tr>
<tr class="separator:a64695ee97ac84eac5a3920b70b710973"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c008191e900b5a98fc7edfc5363e917" id="r_a5c008191e900b5a98fc7edfc5363e917"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c008191e900b5a98fc7edfc5363e917">TDigestFindCluster</a> (const <a class="el" href="structTDigest.html">TDigest</a> *td_ptr, int desired_sample, int *total_samples_ptr)</td></tr>
<tr class="memdesc:a5c008191e900b5a98fc7edfc5363e917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to find the cluster index where a given sample number resides. This function walks through all clusters counting samples in each one until it finds the cluster with the requested sample number.  <br /></td></tr>
<tr class="separator:a5c008191e900b5a98fc7edfc5363e917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7baea6c4664c6af68fdcd05493bb44a0" id="r_a7baea6c4664c6af68fdcd05493bb44a0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7baea6c4664c6af68fdcd05493bb44a0">TDigestGetClusterLimit</a> (const <a class="el" href="structTDigest.html">TDigest</a> *td_ptr, int cluster_index)</td></tr>
<tr class="memdesc:a7baea6c4664c6af68fdcd05493bb44a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to figure out if a proposed max percentile for a cluster is under the percentile limit for that cluster.  <br /></td></tr>
<tr class="separator:a7baea6c4664c6af68fdcd05493bb44a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80f97e575a5d72f1e27821c5ca383a26" id="r_a80f97e575a5d72f1e27821c5ca383a26"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a80f97e575a5d72f1e27821c5ca383a26">TDigestMerge</a> (<a class="el" href="structTDigest.html">TDigest</a> *td_ptr)</td></tr>
<tr class="memdesc:a80f97e575a5d72f1e27821c5ca383a26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to merge all clusters of the t-digest. This function follows Algorithm 1 from the above-referenced white paper by Dunning and Ertl, which provides a means to merge a t-digest with a list of additional samples.  <br /></td></tr>
<tr class="separator:a80f97e575a5d72f1e27821c5ca383a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6eb5f1f8895b62a1cb03e730eefc62e" id="r_ae6eb5f1f8895b62a1cb03e730eefc62e"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae6eb5f1f8895b62a1cb03e730eefc62e">TDigestCalculatePercentile</a> (<a class="el" href="structTDigest.html">TDigest</a> *td_ptr, int percentile)</td></tr>
<tr class="memdesc:ae6eb5f1f8895b62a1cb03e730eefc62e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to run the calculation for a percentile value.  <br /></td></tr>
<tr class="separator:ae6eb5f1f8895b62a1cb03e730eefc62e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1433fe6869b4b154b0c614ddf5e63b9" id="r_ab1433fe6869b4b154b0c614ddf5e63b9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1433fe6869b4b154b0c614ddf5e63b9">TDigestCreate</a> (<a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a> *ret_td_handle_ptr)</td></tr>
<tr class="memdesc:ab1433fe6869b4b154b0c614ddf5e63b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to create a new t-digest.  <br /></td></tr>
<tr class="separator:ab1433fe6869b4b154b0c614ddf5e63b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a356540f77e251eeb23bc0e1b53aa5ca3" id="r_a356540f77e251eeb23bc0e1b53aa5ca3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a356540f77e251eeb23bc0e1b53aa5ca3">TDigestDestroy</a> (<a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a> td_handle)</td></tr>
<tr class="memdesc:a356540f77e251eeb23bc0e1b53aa5ca3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to free t-digest memory.  <br /></td></tr>
<tr class="separator:a356540f77e251eeb23bc0e1b53aa5ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d03f4590fd8de6a09dae821337addd0" id="r_a5d03f4590fd8de6a09dae821337addd0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d03f4590fd8de6a09dae821337addd0">TDigestClear</a> (<a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a> td_handle)</td></tr>
<tr class="memdesc:a5d03f4590fd8de6a09dae821337addd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to reset t-digest to begin collecting a new set of statistics. This function initializes all the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> data members.  <br /></td></tr>
<tr class="separator:a5d03f4590fd8de6a09dae821337addd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ed5a8a3156b75c6bb68e10b47448c8" id="r_a87ed5a8a3156b75c6bb68e10b47448c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87ed5a8a3156b75c6bb68e10b47448c8">TDigestAddSample</a> (<a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a> td_handle, uint32_t value)</td></tr>
<tr class="memdesc:a87ed5a8a3156b75c6bb68e10b47448c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to create a new t-digest.  <br /></td></tr>
<tr class="separator:a87ed5a8a3156b75c6bb68e10b47448c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af264e13aee9643e775d5edf33f5f4ff9" id="r_af264e13aee9643e775d5edf33f5f4ff9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af264e13aee9643e775d5edf33f5f4ff9">TDigestGetPercentileValue</a> (<a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a> td_handle, int percentile, uint32_t *value_at_percentile_ptr)</td></tr>
<tr class="memdesc:af264e13aee9643e775d5edf33f5f4ff9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to get the value at a given percentile.  <br /></td></tr>
<tr class="separator:af264e13aee9643e775d5edf33f5f4ff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3bed2042a4c16b12a312772d0bbef08" id="r_aa3bed2042a4c16b12a312772d0bbef08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa3bed2042a4c16b12a312772d0bbef08">TDigestGetCount</a> (<a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a> td_handle)</td></tr>
<tr class="memdesc:aa3bed2042a4c16b12a312772d0bbef08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to get the number of samples in the digest.  <br /></td></tr>
<tr class="separator:aa3bed2042a4c16b12a312772d0bbef08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An implementation of the t-digest percentile estimation algorithm developed by Ted Dunning and Otmar Ertl and available here: <a href="https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf">https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf</a>. </p>
<p>This algorithm gathers samples of a given metric and stores them in clusters of samples such that each cluster contains a mean and sample count and no other information. As clusters grow and the number of clusters grows, clusters can be combined or created in order to meet algorithm requirements for the max number of clusters and cluster weight (number of samples per cluster). Clusters near the edges of the distribution of samples are scaled such that they contain less samples and clusters near the center of the distribution are scaled such that they contain more samples. Such scaling has the effect of keeping estimation error low. (Nearly) exact values for a given percentile can be calculated from this set of clusters by interpolating between cluster means. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a87ed5a8a3156b75c6bb68e10b47448c8" name="a87ed5a8a3156b75c6bb68e10b47448c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87ed5a8a3156b75c6bb68e10b47448c8">&#9670;&#160;</a></span>TDigestAddSample()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TDigestAddSample </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a></td>          <td class="paramname"><span class="paramname"><em>td_handle</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used to create a new t-digest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_handle</td><td>Handle for the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use. </td></tr>
    <tr><td class="paramname">value</td><td>The value of the new sample to add to the digest. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6eb5f1f8895b62a1cb03e730eefc62e" name="ae6eb5f1f8895b62a1cb03e730eefc62e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6eb5f1f8895b62a1cb03e730eefc62e">&#9670;&#160;</a></span>TDigestCalculatePercentile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t TDigestCalculatePercentile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTDigest.html">TDigest</a> *</td>          <td class="paramname"><span class="paramname"><em>td_ptr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>percentile</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to run the calculation for a percentile value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_ptr</td><td>Pointer to the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use. </td></tr>
    <tr><td class="paramname">percentile</td><td>Integer representing the percentile being calculated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated value at the given percentile. </dd></dl>

</div>
</div>
<a id="a5d03f4590fd8de6a09dae821337addd0" name="a5d03f4590fd8de6a09dae821337addd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d03f4590fd8de6a09dae821337addd0">&#9670;&#160;</a></span>TDigestClear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TDigestClear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a></td>          <td class="paramname"><span class="paramname"><em>td_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used to reset t-digest to begin collecting a new set of statistics. This function initializes all the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> data members. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_handle</td><td>Handle for the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a299738426f17ef7fb3e47f1f5933db8e" name="a299738426f17ef7fb3e47f1f5933db8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a299738426f17ef7fb3e47f1f5933db8e">&#9670;&#160;</a></span>TDigestClusterCompare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int TDigestClusterCompare </td>
          <td>(</td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>operand1_ptr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>operand2_ptr</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used to compare two nodes by looking at their mean values. This is an input to the qsort function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">operand1_ptr</td><td>Pointer to the first cluster to compare. </td></tr>
    <tr><td class="paramname">operand2_ptr</td><td>Pointer to the second cluster to compare. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab1433fe6869b4b154b0c614ddf5e63b9" name="ab1433fe6869b4b154b0c614ddf5e63b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1433fe6869b4b154b0c614ddf5e63b9">&#9670;&#160;</a></span>TDigestCreate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TDigestCreate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a> *</td>          <td class="paramname"><span class="paramname"><em>ret_td_handle_ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used to create a new t-digest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ret_td_handle_ptr</td><td>Pointer for the handle for the new <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successful; false if not. </dd></dl>

</div>
</div>
<a id="a356540f77e251eeb23bc0e1b53aa5ca3" name="a356540f77e251eeb23bc0e1b53aa5ca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a356540f77e251eeb23bc0e1b53aa5ca3">&#9670;&#160;</a></span>TDigestDestroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TDigestDestroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a></td>          <td class="paramname"><span class="paramname"><em>td_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used to free t-digest memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_handle</td><td>Handle for the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5c008191e900b5a98fc7edfc5363e917" name="a5c008191e900b5a98fc7edfc5363e917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c008191e900b5a98fc7edfc5363e917">&#9670;&#160;</a></span>TDigestFindCluster()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int TDigestFindCluster </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structTDigest.html">TDigest</a> *</td>          <td class="paramname"><span class="paramname"><em>td_ptr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>desired_sample</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>total_samples_ptr</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used to find the cluster index where a given sample number resides. This function walks through all clusters counting samples in each one until it finds the cluster with the requested sample number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_ptr</td><td>Pointer to the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use. </td></tr>
    <tr><td class="paramname">desired_sample</td><td>The sample number for which we want to find the host cluster. </td></tr>
    <tr><td class="paramname">total_samples_ptr</td><td>Pointer to the total number of samples in all clusters up to and including the cluster selected by this function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The zero-based cluster index that is host to the desired sample. </dd></dl>

</div>
</div>
<a id="a7baea6c4664c6af68fdcd05493bb44a0" name="a7baea6c4664c6af68fdcd05493bb44a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7baea6c4664c6af68fdcd05493bb44a0">&#9670;&#160;</a></span>TDigestGetClusterLimit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int TDigestGetClusterLimit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structTDigest.html">TDigest</a> *</td>          <td class="paramname"><span class="paramname"><em>td_ptr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>cluster_index</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used to figure out if a proposed max percentile for a cluster is under the percentile limit for that cluster. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_ptr</td><td>Pointer to the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use. </td></tr>
    <tr><td class="paramname">cluster_index</td><td>The current cluster index. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The maximum samples allowed for the given cluster index. </dd></dl>

</div>
</div>
<a id="aa3bed2042a4c16b12a312772d0bbef08" name="aa3bed2042a4c16b12a312772d0bbef08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3bed2042a4c16b12a312772d0bbef08">&#9670;&#160;</a></span>TDigestGetCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TDigestGetCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a></td>          <td class="paramname"><span class="paramname"><em>td_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used to get the number of samples in the digest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_handle</td><td>Handle for the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of samples in the digest. </dd></dl>

</div>
</div>
<a id="af264e13aee9643e775d5edf33f5f4ff9" name="af264e13aee9643e775d5edf33f5f4ff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af264e13aee9643e775d5edf33f5f4ff9">&#9670;&#160;</a></span>TDigestGetPercentileValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TDigestGetPercentileValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="t__digest_8h.html#a61e1b184cecb416e75b832f4d814fa63">TDigestHandle</a></td>          <td class="paramname"><span class="paramname"><em>td_handle</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>percentile</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>value_at_percentile_ptr</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function used to get the value at a given percentile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_handle</td><td>Handle for the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use. </td></tr>
    <tr><td class="paramname">percentile</td><td>The desired percentile between 0 and 1, inclusive. </td></tr>
    <tr><td class="paramname">value_at_percentile_ptr</td><td>Pointer to the return value where resulting value of percentile search is stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successful; false if not. </dd></dl>

</div>
</div>
<a id="a78e4c8c15bfbb881ff875b2aa3c45029" name="a78e4c8c15bfbb881ff875b2aa3c45029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78e4c8c15bfbb881ff875b2aa3c45029">&#9670;&#160;</a></span>TDigestInterpolate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t TDigestInterpolate </td>
          <td>(</td>
          <td class="paramtype">const uint32_t</td>          <td class="paramname"><span class="paramname"><em>input_sample1</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t</td>          <td class="paramname"><span class="paramname"><em>input_sample2</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>sample_index</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>total_interpolation_points</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used to interpolate from input_sample1 to input_sample2 by sample_index/num_samples_of_interest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input_sample1</td><td>The starting sample point for the interpolation. </td></tr>
    <tr><td class="paramname">input_sample2</td><td>The end sample point for the interpolation. </td></tr>
    <tr><td class="paramname">sample_index</td><td>The numerator of the interpolation ratio (sample_index out of total_interpolation_points). </td></tr>
    <tr><td class="paramname">total_interpolation_points</td><td>The denominator of the interpolation ratio (sample_index out of total_interpolation_points).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting value from the interpolation. </dd></dl>

</div>
</div>
<a id="a80f97e575a5d72f1e27821c5ca383a26" name="a80f97e575a5d72f1e27821c5ca383a26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80f97e575a5d72f1e27821c5ca383a26">&#9670;&#160;</a></span>TDigestMerge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool TDigestMerge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTDigest.html">TDigest</a> *</td>          <td class="paramname"><span class="paramname"><em>td_ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used to merge all clusters of the t-digest. This function follows Algorithm 1 from the above-referenced white paper by Dunning and Ertl, which provides a means to merge a t-digest with a list of additional samples. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_ptr</td><td>Pointer to the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if merge was successful; false if not. </dd></dl>
<p>NOTE: We choose to always loop forward to simplify the algorithm, but the white paper referenced above discusses a potential improvement to error rates near q=0 if looping is alternated between forward and reverse from merge to merge.</p>

</div>
</div>
<a id="a64695ee97ac84eac5a3920b70b710973" name="a64695ee97ac84eac5a3920b70b710973"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64695ee97ac84eac5a3920b70b710973">&#9670;&#160;</a></span>TDigestSort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TDigestSort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTDigest.html">TDigest</a> *</td>          <td class="paramname"><span class="paramname"><em>td_ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function used to sort a <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">td_ptr</td><td>Pointer to the <a class="el" href="structTDigest.html" title="The main structure of the t-digest.">TDigest</a> object to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
	<div>Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.</div>
</small></address>
</body>
</html>
