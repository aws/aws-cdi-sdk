<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<title>CDI SDK: src/cdi/test_unit_timeout.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="image_left.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CDI SDK
   </div>
   <div id="projectbrief">SDK for transporting chunks of data reliably and with low latency using a polled mode network driver.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_440858bc2ff41f5ef15b020e90223871.html">cdi</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">test_unit_timeout.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains definitions and implementation of various unit tests for checking the functionality of the timeout.c API functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="cdi__logger__api_8h_source.html">cdi_logger_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cdi__os__api_8h_source.html">cdi_os_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timeout_8h_source.html">timeout.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCallBackUserData.html">CallBackUserData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to be used by the unit test callback function to signal to the test when the callback occurred and whether the callback was successful.  <a href="structCallBackUserData.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a379b43969ca3cf7b801ad214c07efdee" id="r_a379b43969ca3cf7b801ad214c07efdee"><td class="memItemLeft" align="right" valign="top"><a id="a379b43969ca3cf7b801ad214c07efdee" name="a379b43969ca3cf7b801ad214c07efdee"></a>
typedef struct CallBackUserData&#160;</td><td class="memItemRight" valign="bottom"><b>CallBackUserData</b></td></tr>
<tr class="memdesc:a379b43969ca3cf7b801ad214c07efdee"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to be used by the unit test callback function to signal to the test when the callback occurred and whether the callback was successful. <br /></td></tr>
<tr class="separator:a379b43969ca3cf7b801ad214c07efdee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa8f16d7226f99e5e7a4dbba18dcc7942" id="r_aa8f16d7226f99e5e7a4dbba18dcc7942"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8f16d7226f99e5e7a4dbba18dcc7942">TimerCallback</a> (const <a class="el" href="structCdiTimeoutCbData.html">CdiTimeoutCbData</a> *data_ptr)</td></tr>
<tr class="memdesc:aa8f16d7226f99e5e7a4dbba18dcc7942"><td class="mdescLeft">&#160;</td><td class="mdescRight">A callback function to be executed when a timer expires. This function checks the time when the timer callback occurs and compares the callback time with the expected timer expiration time that was stored when the timer was originally set. If the actual time is within a specified range of the expected time then callback user data has its pass field set as true.  <br /></td></tr>
<tr class="separator:aa8f16d7226f99e5e7a4dbba18dcc7942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40a43d8e68fa9032f9626792f59ec863" id="r_a40a43d8e68fa9032f9626792f59ec863"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a40a43d8e68fa9032f9626792f59ec863">OneShotTimeoutTest</a> (int timeout_ms)</td></tr>
<tr class="memdesc:a40a43d8e68fa9032f9626792f59ec863"><td class="mdescLeft">&#160;</td><td class="mdescRight">A test to create a timeout instance add a timer to it, let it expire and check the callback.  <br /></td></tr>
<tr class="separator:a40a43d8e68fa9032f9626792f59ec863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36219f6b633c389e75c3ecca9f116795" id="r_a36219f6b633c389e75c3ecca9f116795"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36219f6b633c389e75c3ecca9f116795">MultipleTimersTest</a> (unsigned int num_timers, bool reverse)</td></tr>
<tr class="memdesc:a36219f6b633c389e75c3ecca9f116795"><td class="mdescLeft">&#160;</td><td class="mdescRight">A test to set multiple timers.  <br /></td></tr>
<tr class="separator:a36219f6b633c389e75c3ecca9f116795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f7c7e0103d7a8ff3aa795b385b7ec5c" id="r_a6f7c7e0103d7a8ff3aa795b385b7ec5c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f7c7e0103d7a8ff3aa795b385b7ec5c">TimersSetAndClear</a> (uint32_t num_timers)</td></tr>
<tr class="memdesc:a6f7c7e0103d7a8ff3aa795b385b7ec5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">A test to set multiple timers, let them expire in order and check the callback values.  <br /></td></tr>
<tr class="separator:a6f7c7e0103d7a8ff3aa795b385b7ec5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fbd5c3aec5f0fbfa087e8ad8662fdac" id="r_a3fbd5c3aec5f0fbfa087e8ad8662fdac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cdi__core__api_8h.html#a0597f052733858ab62ea6388aa5ae54a">CdiReturnStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fbd5c3aec5f0fbfa087e8ad8662fdac">TestUnitTimeout</a> (void)</td></tr>
<tr class="memdesc:a3fbd5c3aec5f0fbfa087e8ad8662fdac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main routine to test the timeout function.  <br /></td></tr>
<tr class="separator:a3fbd5c3aec5f0fbfa087e8ad8662fdac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains definitions and implementation of various unit tests for checking the functionality of the timeout.c API functions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a36219f6b633c389e75c3ecca9f116795" name="a36219f6b633c389e75c3ecca9f116795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36219f6b633c389e75c3ecca9f116795">&#9670;&#160;</a></span>MultipleTimersTest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool MultipleTimersTest </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>num_timers</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>reverse</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A test to set multiple timers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_timers</td><td>sets how many timers are added to the timeout instance </td></tr>
    <tr><td class="paramname">reverse</td><td>if true, each successive timer object has an earlier deadline as the list is built.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if passes, false if failed </dd></dl>
<p>Check the pass status of all of the user_data structures sent to the callback function. The callback function logged errors for additional detail into the actual failure. Checking here as well to catch any user data structures where the callback didn't occur at all.</p>

</div>
</div>
<a id="a40a43d8e68fa9032f9626792f59ec863" name="a40a43d8e68fa9032f9626792f59ec863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40a43d8e68fa9032f9626792f59ec863">&#9670;&#160;</a></span>OneShotTimeoutTest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool OneShotTimeoutTest </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>timeout_ms</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A test to create a timeout instance add a timer to it, let it expire and check the callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout_ms</td><td>is a timeout to set for the created timer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if test pass, false if failure </dd></dl>

</div>
</div>
<a id="a3fbd5c3aec5f0fbfa087e8ad8662fdac" name="a3fbd5c3aec5f0fbfa087e8ad8662fdac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fbd5c3aec5f0fbfa087e8ad8662fdac">&#9670;&#160;</a></span>TestUnitTimeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cdi__core__api_8h.html#a0597f052733858ab62ea6388aa5ae54a">CdiReturnStatus</a> TestUnitTimeout </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main routine to test the timeout function. </p>
<p>External declarations. </p>

</div>
</div>
<a id="aa8f16d7226f99e5e7a4dbba18dcc7942" name="aa8f16d7226f99e5e7a4dbba18dcc7942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8f16d7226f99e5e7a4dbba18dcc7942">&#9670;&#160;</a></span>TimerCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TimerCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structCdiTimeoutCbData.html">CdiTimeoutCbData</a> *</td>          <td class="paramname"><span class="paramname"><em>data_ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A callback function to be executed when a timer expires. This function checks the time when the timer callback occurs and compares the callback time with the expected timer expiration time that was stored when the timer was originally set. If the actual time is within a specified range of the expected time then callback user data has its pass field set as true. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data_ptr</td><td>is a pointer to the <a class="el" href="structCdiTimeoutCbData.html" title="Structure for Callback functions to use to return data from callback.">CdiTimeoutCbData</a> that is used for timeout callbacks. This structure contains a user data pointer to <a class="el" href="structCallBackUserData.html" title="A structure to be used by the unit test callback function to signal to the test when the callback occ...">CallBackUserData</a> which stores the expected expiration time and the pass signal that was mentioned above </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6f7c7e0103d7a8ff3aa795b385b7ec5c" name="a6f7c7e0103d7a8ff3aa795b385b7ec5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f7c7e0103d7a8ff3aa795b385b7ec5c">&#9670;&#160;</a></span>TimersSetAndClear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool TimersSetAndClear </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>num_timers</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A test to set multiple timers, let them expire in order and check the callback values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_timers</td><td>sets how many timers to add and remove from the timeout instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true for pass, false for test failure </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
	<div>Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.</div>
</small></address>
</body>
</html>
